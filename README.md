# üí∏ Transaction Service

**Transaction Service** ‚Äî —ç—Ç–æ –∏–º–∏—Ç–∞—Ü–∏—è –±–∞–Ω–∫–æ–≤—Å–∫–æ–π —Å–∏—Å—Ç–µ–º—ã –ø–µ—Ä–µ–≤–æ–¥–æ–≤ —Å –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ–º –º–∏–∫—Ä–æ—Å–µ—Ä–≤–∏—Å–Ω–æ–π –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä—ã. –°–µ—Ä–≤–∏—Å —Ä–µ–∞–ª–∏–∑–æ–≤–∞–Ω –Ω–∞ FastAPI –∏ –ø–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ—Ç –∞—Å–∏–Ω—Ö—Ä–æ–Ω–Ω—É—é –æ–±—Ä–∞–±–æ—Ç–∫—É —Ç—Ä–∞–Ω–∑–∞–∫—Ü–∏–π, –æ—á–µ—Ä–µ–¥—å —Å–æ–æ–±—â–µ–Ω–∏–π —á–µ—Ä–µ–∑ RabbitMQ –∏ —Å–±–æ—Ä –º–µ—Ç—Ä–∏–∫ —á–µ—Ä–µ–∑ Prometheus + Grafana.

---

## üöÄ –í–µ—Ç–∫–∏ –∏ –≤–µ—Ä—Å–∏–∏

| –í–µ—Ç–∫–∞ | –í–µ—Ä—Å–∏—è | –û–ø–∏—Å–∞–Ω–∏–µ |
|-------|--------|----------|
| `master` | 0.0.2 | **–ê–∫—Ç—É–∞–ª—å–Ω–∞—è —Å—Ç–∞–±–∏–ª—å–Ω–∞—è –≤–µ—Ä—Å–∏—è**. –ê—Å–∏–Ω—Ö—Ä–æ–Ω–Ω–∞—è —Ä–µ–∞–ª–∏–∑–∞—Ü–∏—è —Å `aio_pika`, `asyncpg`, –º–µ—Ç—Ä–∏–∫–∞–º–∏ –∏ –º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥–æ–º. |
| `develop` | 0.0.3-dev | –í–µ—Ç–∫–∞ –¥–ª—è —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è, —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∏ –∏ —ç–∫—Å–ø–µ—Ä–∏–º–µ–Ω—Ç–æ–≤. |

---

## ‚öôÔ∏è –ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞ (v0.0.2)

- **FastAPI** ‚Äî REST API –¥–ª—è –æ–±—Ä–∞–±–æ—Ç–∫–∏ —Ç—Ä–∞–Ω–∑–∞–∫—Ü–∏–π
- **PostgreSQL** ‚Äî –•—Ä–∞–Ω–µ–Ω–∏–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π –∏ —Ç—Ä–∞–Ω–∑–∞–∫—Ü–∏–π
- **RabbitMQ** ‚Äî –û—á–µ—Ä–µ–¥—å —Å–æ–æ–±—â–µ–Ω–∏–π –æ —Ç—Ä–∞–Ω–∑–∞–∫—Ü–∏—è—Ö
- **Prometheus + Grafana** ‚Äî –°–±–æ—Ä –∏ –≤–∏–∑—É–∞–ª–∏–∑–∞—Ü–∏—è –º–µ—Ç—Ä–∏–∫
- **aio_pika** ‚Äî –ê—Å–∏–Ω—Ö—Ä–æ–Ω–Ω–∞—è –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è —Å RabbitMQ
- **asyncpg** ‚Äî –ê—Å–∏–Ω—Ö—Ä–æ–Ω–Ω–æ–µ –ø–æ–¥–∫–ª—é—á–µ–Ω–∏–µ –∫ PostgreSQL

---

## üì¶ –ó–∞–ø—É—Å–∫ (v0.0.2)

```bash
# –ö–ª–æ–Ω–∏—Ä—É–µ–º —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏–π
git clone https://github.com/your-user/transaction-service.git
cd transaction-service

# –ó–∞–ø—É—Å–∫–∞–µ–º docker-compose
docker-compose up --build
```

> –ü–æ—Å–ª–µ –∑–∞–ø—É—Å–∫–∞:
- API –±—É–¥–µ—Ç –¥–æ—Å—Ç—É–ø–Ω–æ –ø–æ –∞–¥—Ä–µ—Å—É: http://localhost:8000/docs
- –ò–Ω—Ç–µ—Ä—Ñ–µ–π—Å Grafana: http://localhost:3000 (–ª–æ–≥–∏–Ω/–ø–∞—Ä–æ–ª—å: admin/admin)
- –ò–Ω—Ç–µ—Ä—Ñ–µ–π—Å RabbitMQ: http://localhost:15672 (–ª–æ–≥–∏–Ω/–ø–∞—Ä–æ–ª—å: admin/strongpassword)
- Prometheus: http://localhost:9090

---

## üì• –ü—Ä–∏–º–µ—Ä –∑–∞–ø—Ä–æ—Å–∞

```json
POST /transactions
{
  "sender": "user1",
  "recipient": "user2",
  "amount": 100.0
}
```

---

## üìÅ –°—Ç—Ä—É–∫—Ç—É—Ä–∞ –ø—Ä–æ–µ–∫—Ç–∞

```
.
‚îú‚îÄ‚îÄ main.py                # FastAPI-–ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ
‚îú‚îÄ‚îÄ Dockerfile             # –°–±–æ—Ä–∫–∞ –æ–±—Ä–∞–∑–∞ —Å–µ—Ä–≤–∏—Å–∞
‚îú‚îÄ‚îÄ docker-compose.yml     # –ò–Ω—Ñ—Ä–∞—Å—Ç—Ä—É–∫—Ç—É—Ä–∞
‚îú‚îÄ‚îÄ requirements.txt       # –ó–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏
‚îú‚îÄ‚îÄ prometheus.yml         # –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è Prometheus
‚îú‚îÄ‚îÄ rabbitmq.conf          # –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è RabbitMQ
‚îî‚îÄ‚îÄ postgres-data/         # –î–∞–Ω–Ω—ã–µ PostgreSQL
```

---

## üìà –ú–µ—Ç—Ä–∏–∫–∏

–ò—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è [`prometheus_fastapi_instrumentator`](https://github.com/trallnag/prometheus-fastapi-instrumentator) –¥–ª—è –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–π –≥–µ–Ω–µ—Ä–∞—Ü–∏–∏ –º–µ—Ç—Ä–∏–∫ FastAPI.

Prometheus –Ω–∞—Å—Ç—Ä–æ–µ–Ω –Ω–∞ —Å–±–æ—Ä –º–µ—Ç—Ä–∏–∫ —Å:
- `transaction-service:8000`
- `rabbitmq_exporter:9419`

---

## üß™ –í–µ—Ä—Å–∏—è 0.0.1 (–∞—Ä—Ö–∏–≤–Ω–∞—è)

–ù–∞—Ö–æ–¥–∏—Ç—Å—è –≤ [—Å—Ç–∞—Ä–æ–π —Ä–µ–≤–∏–∑–∏–∏ –≤–µ—Ç–∫–∏](https://github.com/NAGenaev/transaction-system/tree/8ccbca08279526498647962b6b00054309b9f765).
PPPS (TS) v0.0.1-alpha (https://github.com/NAGenaev/transaction-system/releases/tag/0.0.1)

–û—Å–æ–±–µ–Ω–Ω–æ—Å—Ç–∏:
- –°–∏–Ω—Ö—Ä–æ–Ω–Ω–∞—è —Ä–µ–∞–ª–∏–∑–∞—Ü–∏—è —Å `pika`
- –ë–µ–∑ –º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥–∞
- –¢–æ–ª—å–∫–æ –±–∞–∑–æ–≤—ã–π FastAPI + PostgreSQL + RabbitMQ

---